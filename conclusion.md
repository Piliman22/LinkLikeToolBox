# 解析

この記事は学習参考用であり、違法な目的で使用しないでください。

## 最初に
最近リンクラ(Link！Like！ラブライブ！蓮ノ空スクールアイドルクラブ)に音ゲー機能ができましたよね。

そこで初めてみてどういう構造をしているのか気になったためこれを作り始めました。

創作譜面に触れている自分としては、自分で譜面が作れて撮影できたらなと考えていました。

比較的こういった解析をしている人がいなかったのでインターネット上ではなかなか解析情報が転がっていなかったので自分で解析することになりました。

プロセカ(プロジェクト世界カラフルステージfeet.初音ミク)でも多少の解析はしていたものの、自分でここまでやるのは初めてだったので必要になったときに記録として残しておきます。

## apk

まずはインストーラーファイルの解析からです。

とは言ってもここでできるのは、`libil2cpp.so`と`global-metadata.dat`を抽出してそこからil2cppdumperを書けることぐらいです。

[ここから](https://apkpure.com/jp/link%EF%BC%81like%EF%BC%81%E3%83%A9%E3%83%96%E3%83%A9%E3%82%A4%E3%83%96%EF%BC%81/com.oddno.lovelive)まずはapkをもらいました。

xapkでした。最近のものはxapkが多いですよね。

そんなことは気にせずそれぞれ解凍していって取り出してil2cppdumperにかけました。

一発で通りましたね。いままでやってきたアプリではメモリから`global-metadata.dat`を抽出しないといけないものが多かったので、驚きでしたね。

自動化が楽になります。

## frida

ここからは動的解析の話です。

あいにくroot化されているいい感じの端末が自宅にないためapkにfrida-gadgetを入れる方法しかありません。

objectionというものを使うと簡単にapkにfrida-gadgetを入れることができます。

